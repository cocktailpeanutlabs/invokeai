{
  "version": 1,
  "cmds": {
    "nvidia": "pip install \"InvokeAI[xformers]\" --use-pep517 --extra-index-url https://download.pytorch.org/whl/cu121",
    "amd": {
      "linux": "pip install InvokeAI --use-pep517 --extra-index-url https://download.pytorch.org/whl/rocm5.4.2",
      "win32": "pip install torch-directml"
    },
    "darwin": "pip install InvokeAI --use-pep517",
    "default": "pip install InvokeAI --use-pep517 --extra-index-url https://download.pytorch.org/whl/cpu"
  },
  "run": [{
    "method": "shell.run",
    "params": {
      "venv": "env",
      "path": "app",
      "message": [
        "{{gpu === 'nvidia' ? self.cmds.nvidia : (platform === 'darwin' ? self.cmds.darwin : (gpu === 'amd' ? self.cmds[platform] : self.cmds.default))}}",
        "invokeai-configure --yes --root ."
      ]
    }
  }, {
    "method": "fs.share",
    "params": {
      "drive": {
        "models": "app/models",
        "databases": "app/databases",
        "autoimport": "app/autoimport",
        "outputs": "app/outputs",
        "nodes": "app/nodes",
        "text-inversion-output": "app/text-inversion-output",
        "text-inversion-training-data": "app/text-inversion-training-data"
      }
    }
  }, {
    "method": "notify",
    "params": {
      "html": "App launched. Click 'start' to get started"
    }
  }]
}
